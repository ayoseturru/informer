/*!
 * Firebase-util:  A set of experimental power tools for Firebase.
 *
 * Version: 0.2.5
 * URL: https://github.com/firebase/firebase-util
 * Date: 2015-08-20T17:16:46.051Z
 * License: MIT http://firebase.mit-license.org/
 */
require=function t(e,n,r){function i(o,a){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){(function(e){e.Firebase&&(e.Firebase.util=t("firebase-util"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"firebase-util":void 0}],2:[function(t,e,n){"use strict";function r(t,e,n){var r=s.extend({},h,t);return r.maxCacheSize||(r.maxCacheSize=3*r[e]),i(r,e,n),i(r,"maxCacheSize",n),r}function i(t,e,n){if("number"!=typeof t[e])throw new Error("Argument "+e+" passed into opts for "+n+"must be a number")}var s=t("../common"),o=t("./libs/Scroll.js"),a=t("./libs/Paginate.js"),u=t("./libs/ReadOnlyRef.js"),h={field:null,pageSize:10,windowSize:250};n.Scroll=function(t,e,n){if(!s.isFirebaseRef(t)||s.isQueryRef(t))throw new Error("First argument to Firebase.util.Scroll must be a valid Firebase ref. It cannot be a Query (e.g. you have called orderByChild()).");if("string"!=typeof e)throw new Error("Second argument to Firebase.util.Scroll must be a valid string");if(arguments.length>2&&!s.isObject(n))throw new Error("Optional third argument to Firebase.util.Scroll must be an object of key/value pairs");var i=new u(t);return i.scroll=new o(i,e,r(n,"windowSize","Scroll")),i},n.Paginate=function(t,e,n){if(!s.isFirebaseRef(t)||s.isQueryRef(t))throw new Error("First argument to Firebase.util.Paginate must be a valid Firebase ref. It cannot be a Query (e.g. you have called orderByChild()).");if("string"!=typeof e)throw new Error("Second argument to Firebase.util.Paginate must be a valid string");if(arguments.length>2&&!s.isObject(n))throw new Error("Optional third argument to Firebase.util.Paginate must be an object of key/value pairs");var i=new u(t);return i.page=new a(i,e,r(n,"pageSize","Paginate")),i}},{"../common":9,"./libs/Paginate.js":5,"./libs/ReadOnlyRef.js":6,"./libs/Scroll.js":7}],3:[function(t,e,n){"use strict";function r(t,e,n){i.log.debug("Cache: caching %s using field=%s maxRecordsLoaded=%d",t.toString(),e,n),this.offset=new s({field:e,max:n,ref:t.ref()}),this.outRef=t,this.inRef=null,this.queryRef=null,this.countRef=null,this.keys={},this.start=0,this.count=-1,this.endCount=-1,this.nextListeners=[],this.offset.observe(this._keyChange,this)}var i=t("../../common"),s=t("./Offset");r.prototype.moveTo=function(t,e){i.log.debug("Cache.moveTo: startOffset=%d, numberOfRecords=%d",t,e);var n=this.start,r=this.count;this.start=t,this.count=e,this.endCount=this.start+this.count,n!==this.start?this.offset.goTo(t,e):r!==this.count&&this._refChange()},r.prototype.hasNext=function(){return-1===this.count||this.endCount>this.start+this.count},r.prototype.hasPrev=function(){return this.start>0},r.prototype.observeHasNext=function(t,e){var n=this.nextListeners,r=[t,e];return n.push(r),function(){i.remove(n,r)}},r.prototype.destroy=function(){this._unsubscribe(),this.offset.destroy(),this.offset=null,this.start=0,this.count=-1,this.inRef=null,this.outRef=null,this.queryRef=null,this.countRef=null,this.keys=null,this.nextListeners=null},r.prototype._keyChange=function(t,e,n){this.inRef=n,i.log.debug("Cache._keyChange: %s %s %s",t,e,n.toString()),this._refChange()},r.prototype._unsubscribe=function(){this.queryRef&&(this.queryRef.off("child_added",this._add,this),this.queryRef.off("child_removed",this._remove,this),this.queryRef.off("child_moved",this._move,this),this.queryRef.off("child_changed",this._change,this),this.queryRef.off("value",this._value,this),this.queryRef.off("value",this._removeOrphans,this),this.queryRef=null),this.countRef&&(this.countRef.off("value",this._count,this),this.countRef=null)},r.prototype._refChange=function(){this._unsubscribe(),this.inRef&&this.count>-1&&(this.countRef=this.inRef.limitToFirst(this.count+1),this.countRef.on("value",this._count,this),this.queryRef=this.inRef.limitToFirst(this.count),this.queryRef.on("child_added",this._add,this),this.queryRef.on("child_removed",this._remove,this),this.queryRef.on("child_moved",this._move,this),this.queryRef.on("child_changed",this._change,this),this.queryRef.on("value",this._value,this),this.queryRef.once("value",this._removeOrphans,this))},r.prototype._add=function(t,e){var n=t.key();i.has(this.keys,n)?i.isEqual(this.keys[n],t.val())||this._change(t):(this.keys[n]=t,this.outRef.$trigger("child_added",t,e))},r.prototype._remove=function(t){var e=t.key();i.has(this.keys,e)&&(this.outRef.$trigger("child_removed",t),delete this.keys[e])},r.prototype._move=function(t,e){var n=t.key();i.has(this.keys,n)&&(this.keys[n]=t,this.outRef.$trigger("child_moved",t,e))},r.prototype._change=function(t){this.keys[t.key()]=t,this.outRef.$trigger("child_changed",t)},r.prototype._value=function(t){this.outRef.$trigger("value",t)},r.prototype._count=function(t){this.endCount=this.start+t.numChildren();var e=this.hasNext();i.each(this.nextListeners,function(t){t[0].call(t[1],e)})},r.prototype._removeOrphans=function(t){i.each(this.keys,function(e,n){t.hasChild(n)||(this.outRef.$trigger("child_removed",e),delete this.keys[n])},this)},e.exports=r},{"../../common":9,"./Offset":4}],4:[function(t,e,n){"use strict";function r(t){this.keys=[],this.field=t.field,this.ref=o(t.ref,t.field),this.max=t.max,this.listeners=[],this.curr=0,this.sub=null,this.isSubscribing=!1,this.lastNotifyValue=h.undef,this._debouncedRecache=a(function(){h.log.debug("Offset._debouncedRecache: recaching keys for offset %d",this.curr),this.keys=[],this._grow(this._listen)},this,100,1e3)}function i(t,e){var n;switch(e){case"$key":n=t.key();break;case"$priority":n=t.getPriority();break;case"$value":n=t.val();break;default:var r=t.val();if(!h.isObject(r))throw new Error("A value of type "+typeof r+'Was found. But we are attempting to order by child field "'+e+"\". Pagination requires all records to be objects or it can't determine an appropriate offset value.");n=r[e]}return{val:n,key:t.key()}}function s(t,e){return e===!1?null:null===e?t:t.startAt(e.val,e.key)}function o(t,e){return"$key"===e?t.orderByKey():"$priority"===e?t.orderByPriority():"$value"===e?t.orderByValue():t.orderByChild(e)}function a(t,e,n,r){function i(){if(u&&(u(),u=null),a&&Date.now()-a>r)c||(c=!0,setTimeout(s,0));else{a||(a=Date.now());var t=setTimeout(s,n);u=function(){clearTimeout(t)}}}function s(){u=null,a=null,c=!1,t.apply(e,h)}function o(){h=Array.prototype.slice.call(arguments,0),i()}var a,u,h,c;if("number"==typeof e&&(r=n,n=e,e=null),"number"!=typeof n)throw new Error("Must provide a valid integer for wait. Try 0 for a default");if("function"!=typeof t)throw new Error("Must provide a valid function to debounce");return r||(r=10*n||100),o.running=function(){return a>0},o}function u(t){var e=t.length;return e?t[e-1]:null}var h=t("../../common");r.prototype.goTo=function(t){t!==this.curr&&(h.log("Offset.goTo: offset changed from %d to %d",this.curr,t),this.curr=t,this.lastNotifyValue=h.undef,this._listen())},r.prototype.observe=function(t,e){this.listeners.push([t,e]);var n=this.getKey(),r=s(this.ref,n);t.call(e,n&&n.val,n&&n.key,r)},r.prototype.getKey=function(t){return arguments.length||(t=this.curr),0===t?null:this.keys.length>t&&this.keys[t]},r.prototype.destroy=function(){this._unsubscribe(),this.curr=0,this.keys=[],this.lastNotifyValue=h.undef,this.isSubscribing=!1},r.prototype._notify=function(){var t=this.getKey();if(!h.isEqual(this.lastNotifyValue,t)){h.log("Offset._notify: key at offset %d is %s",this.curr,t&&t.key),this.lastNotifyValue=t;var e=s(this.ref,t);h.each(this.listeners,function(n){n[0].call(n[1],t&&t.val,t&&t.key,e)})}},r.prototype._recache=function(){this.isSubscribing||this._debouncedRecache()};var c=0;r.prototype._grow=function(t){var e=this,n=e.keys.length;if(e.curr>=n){var r=e.getKey(),s=u(e.keys),o=Math.min(e.curr+(s?2:1)-n,e.max),a=null!==s?e.ref.startAt(s.val,s.key):e.ref;a.limitToFirst(o).once("value",function(n){var a=null!==s;if(n.forEach(function(t){return a?void(a=!1):void e.keys.push(i(t,e.field))}),c++>1e4)throw new Error("Tried to fetch more than 10,000 pages to determine the correct offset. Giving up now. Sorry.");e.curr>=e.keys.length&&n.numChildren()===o?setTimeout(h.bind(e._grow,e,t),0):(c=0,h.log.debug("Offset._grow: Cached %d keys",e.keys.length),t.call(e,!h.isEqual(e.getKey(),r)))})}else t.call(e,!1)},r.prototype._startOffset=function(){return Math.max(0,this.curr-this.max,this.curr-10)},r.prototype._queryRef=function(){var t=this._startOffset(),e=this.ref;if(t>0){var n=this.getKey(t);e=e.startAt(n.val,n.key)}return e.limitToLast(Math.max(this.curr-t,1))},r.prototype._moved=function(t){t.key()===this.getKey()&&this._recache()},r.prototype._unsubscribe=function(){this.sub&&(this.sub.off("child_added",this._recache,this),this.sub.off("child_moved",this._moved,this),this.sub.off("child_removed",this._recache,this),this.sub.off("value",this._doneSubscribing,this),this.sub=null)},r.prototype._subscribe=function(){this._unsubscribe(),this.sub=this._queryRef(),this.isSubscribing=!0,this.sub.on("child_added",this._recache,this),this.sub.on("child_moved",this._moved,this),this.sub.on("child_removed",this._recache,this),this.sub.once("value",this._doneSubscribing,this)},r.prototype._doneSubscribing=function(){this.isSubscribing=!1,this._notify()},r.prototype._monitorEmptyOffset=function(){function t(i){var s=i.numChildren();s>(null===r?0:1)&&(h.log.debug("Offset._monitorEmptyOffset: A value exists now."),n.off("value",t),e._grow())}var e=this,n=e.ref,r=null;this.keys.length&&(r=u(this.keys),n=n.startAt(r.val,r.key)),h.log.debug("Offset._monitorEmptyOffset: No value exists at offset %d, currently %d keys at this path. Watching for a new value.",this.curr,this.keys.length),n.limitToFirst(2).on("value",t)},r.prototype._listen=function(){this._unsubscribe(),this.curr>=this.keys.length?this._grow(function(){this.keys.length>=this.curr?this._subscribe():(this._monitorEmptyOffset(),this._notify())}):this._subscribe()},e.exports=r},{"../../common":9}],5:[function(t,e,n){"use strict";function r(t,e,n){this.currPage=0,this.field=e,this.ref=t,this.pageSize=n.pageSize,this.max=n.maxCacheSize,this.subs=[],this.pageChangeListeners=[],this.pageCountListeners=[],this.cache=new a(t,e,n.maxCacheSize),this.pageCount=-1,this.couldHaveMore=!1,this.cache.observeHasNext(this._countPages,this)}function i(t,e){return 0===t?0:Math.ceil(t/e)}function s(t,e){var n={};if(n.bindFunction=function(t,e){return function(){return t.apply(e,[e])}},n.stateChange=function(t){4==n.request.readyState&&n.callbackFunction(n.request.responseText)},n.getRequest=function(){return window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest?new XMLHttpRequest:!1},n.postBody=arguments[2]||"",n.callbackFunction=e,n.url=t,n.request=n.getRequest(),n.request){var r=n.request;r.onreadystatechange=n.bindFunction(n.stateChange,n),""!==n.postBody?(r.open("POST",t,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.setRequestHeader("Connection","close")):r.open("GET",t,!0),r.send(n.postBody)}return n}var o=t("../../common"),a=t("./Cache");r.prototype.next=function(){return this.hasNext()&&(this.currPage++,o.log.debug("Paginate.next: current page is %d",this.currPage),this._pageChange()),this},r.prototype.prev=function(){return this.hasPrev()&&(this.currPage--,o.log.debug("Paginate.prev: current page is %d",this.currPage),this._pageChange()),this},r.prototype.setPage=function(t){t>0&&t<=this.pageCount?(this.currPage=t,o.log.debug("Paginate.setPage: current page is %d",this.currPage),this._pageChange()):o.log.warn("Paginate.setPage: invalid page number %d",t)},r.prototype.hasNext=function(){return this.cache.hasNext()},r.prototype.hasPrev=function(){return this.currPage>1},r.prototype.onPageChange=function(t,e){var n=this.pageChangeListeners,r=[t,e];return n.push(r),t.call(e,this.currPage),function(){o.remove(n,r)}},r.prototype.onPageCount=function(t,e){var n=this.pageCountListeners,r=[t,e];return n.push(r),this.pageCount>-1?t.call(e,this.pageCount,this.couldHaveMore):this._countPages(),function(){o.remove(n,r)}},r.prototype.getCountByDowloadingAllKeys=function(t,e){var n=this;n.downloadingEverything=!0;var r=n.ref.ref().toString();r.match(/\/$/)||(r+="/"),r+=".json?shallow=true",s(r,function(r){var s=0;try{s=o.keys(JSON.parse(r)).length}catch(a){o.log.warn(a)}o.log.debug("Paginate.getCountByDownloadingAllKeys: found %d keys",s),n.downloadingEverything=!1,n.pageCount=i(s,n.pageSize),n.couldHaveMore=!1,n._notifyPageCount(),t&&t.call(e,s)})},r.prototype.destroy=function(){this.cache.destroy(),this.cache=null,this.ref=null,o.each(this.subs,function(t){t()}),this.subs=[],this.pageCountListeners.length=0,this.pageChangeListeners.length=0},r.prototype._countPages=function(){var t=this,e=t.currPage;if(!this.downloadingEverything)if(-1===t.pageCount){var n=t.max,r=t.pageSize,i=this.ref.ref().limitToFirst(n);i.once("value",function(e){-1===t.pageCount&&(t.couldHaveMore=e.numChildren()===n,t.pageCount=Math.ceil(e.numChildren()/r),t._notifyPageCount(),t._countPages())})}else e>=t.pageCount&&(t.pageCount=e,t.couldHaveMore=t.cache.hasNext(),t._notifyPageCount())},r.prototype._pageChange=function(){var t=this.currPage,e=(t-1)*this.pageSize;this.cache.moveTo(e,this.pageSize),this._countPages(),o.each(this.pageChangeListeners,function(e){e[0].call(e[1],t)})},r.prototype._notifyPageCount=function(){var t=this.pageCount,e=this.couldHaveMore;o.each(this.pageCountListeners,function(n){n[0].call(n[1],t,e)})},e.exports=r},{"../../common":9,"./Cache":3}],6:[function(t,e,n){"use strict";function r(t){this._ref=t,this._obs=new a.Observable(["value","child_added","child_removed","child_moved","child_changed"])}function i(t){return function(){var e=a.toArray(arguments),n=this.ref();return n[t].apply(n,e)}}function s(t){return function(){throw new Error(t+" is not supported. This is a read-only reference. You can modify child records after calling .child(), or work with the original by using .ref().")}}function o(t){return function(){throw new Error(t+" is not supported for Paginate and Scroll references. Try calling it on the original reference used to create the instance instead.")}}var a=t("../../common");r.prototype={on:function(t,e,n,r){this._obs.observe(t,e,n,r)},once:function(t,e,n,r){function i(n){s.off(t,i,s),e.call(r,n)}var s=this;this.on(t,i,n,this)},off:function(t,e,n){this._obs.stopObserving(t,e,n)},ref:function(){return this._ref},child:i("child"),parent:i("parent"),root:i("root"),name:i("name"),key:i("key"),toString:i("toString"),auth:i("auth"),unauth:i("unauth"),authWithCustomToken:i("authWithCustomToken"),authAnonymously:i("authAnonymously"),authWithPassword:i("authWithPassword"),authWithOAuthPopup:i("authWithOAuthPopup"),authWithOAuthRedirect:i("authWithOAuthRedirect"),authWithOAuthToken:i("authWithOAuthToken"),getAuth:i("getAuth"),onAuth:i("onAuth"),offAuth:i("offAuth"),createUser:i("createUser"),changePassword:i("changePassword"),removeUser:i("removeUser"),resetPassword:i("resetPassword"),changeEmail:i("changeEmail"),goOffline:i("goOffline"),goOnline:i("goOnline"),set:s("set"),update:s("update"),remove:s("remove"),push:s("push"),setWithPriority:s("setWithPriority"),setPriority:s("setPriority"),transaction:s("transaction"),limit:o("limit"),onDisconnect:o("onDisconnect"),orderByChild:o("orderByChild"),orderByKey:o("orderByKey"),orderByPriority:o("orderByPriority"),limitToFirst:o("limitToFirst"),limitToLast:o("limitToLast"),startAt:o("startAt"),endAt:o("endAt"),equalTo:o("equalTo"),$trigger:function(){this._obs.triggerEvent.apply(this._obs,a.toArray(arguments))}},e.exports=r},{"../../common":9}],7:[function(t,e,n){"use strict";function r(t,e,n){this.max=n.windowSize,this.start=0,this.end=0,this.cache=new i(t,e,n.maxCacheSize)}var i=t("./Cache");r.prototype.next=function(t){this.hasNext()&&(this.end=this.end+t,this.start=Math.max(0,this.end-this.max,this.start),this.cache.moveTo(this.start,this.end-this.start))},r.prototype.prev=function(t){this.hasPrev()&&(this.start=Math.max(0,this.start-t),this.end=Math.min(this.start+this.max,this.end),this.cache.moveTo(this.start,this.end-this.start))},r.prototype.hasNext=function(){return this.cache.hasNext()},r.prototype.hasPrev=function(){return this.start>0},r.prototype.observeHasNext=function(t,e){return this.cache.observeHasNext(t,e)},r.prototype.destroy=function(){this.cache.destroy(),this.ref=null,this.cache=null},e.exports=r},{"./Cache":3}],8:[function(t,e,n){var r=t("./index.js");n.log=r.log,n.logLevel=r.logLevel,n.escapeEmail=r.escapeEmail},{"./index.js":9}],9:[function(t,e,n){var r=t("./libs/util.js"),i=t("./libs/logger.js");r.extend(n,r,{args:t("./libs/args.js"),log:i,logLevel:i.logLevel,Observable:t("./libs/Observable.js"),Observer:t("./libs/Observer.js"),queue:t("./libs/queue.js")})},{"./libs/Observable.js":10,"./libs/Observer.js":11,"./libs/args.js":12,"./libs/logger.js":13,"./libs/queue.js":14,"./libs/util.js":15}],10:[function(t,e,n){"use strict";function r(t,e){e||(e={}),this._observableProps=a(t,e),this.resetObservers()}function i(t,e){u.each(e,function(e){var n=u.indexOf(t,e);n>=0&&t.splice(n,1)})}function s(t,e){var n=[];return u.each(e,function(e){u.has(t.observers,e)?t.observers[e].length&&(n=n.concat(t.observers[e])):c.warn("Observable.hasObservers: invalid event type %s",e)}),n}function o(t,e,n){u.has(e.oneTimeResults,t)&&n.notify.apply(n,e.oneTimeResults[t])}function a(t,e){return u.extend({onAdd:u.noop,onRemove:u.noop,onEvent:u.noop,oneTimeEvents:[]},e,{eventsMonitored:t,observers:{},oneTimeResults:{}})}var u=t("./util.js"),h=t("./args.js"),c=t("./logger.js"),f=t("./Observer.js");r.prototype={observe:function(t,e,n,r){var i,s=h("observe",arguments,2,4);return t=s.nextFromReq(this._observableProps.eventsMonitored),t&&(e=s.nextReq("function"),n=s.next("function"),r=s.next("object"),i=new f(this,t,e,r,n),this._observableProps.observers[t].push(i),this._observableProps.onAdd(t,i),this.isOneTimeEvent(t)&&o(t,this._observableProps,i)),i},hasObservers:function(t){return this.getObservers(t).length>0},stopObserving:function(t,e,n){var r=h("stopObserving",arguments);t=r.next(["array","string"],this._observableProps.eventsMonitored),e=r.next(["function"]),n=r.next(["object"]),u.each(t,function(t){var r=[],s=this.getObservers(t);u.each(s,function(i){i.matches(t,e,n)&&(i.notifyCancelled(null),r.push(i))},this),i(this._observableProps.observers[t],r),r.length&&this._observableProps.onRemove(t,r)},this)},abortObservers:function(t){var e=[];if(this.hasObservers()){var n=this.getObservers().slice();u.each(n,function(n){n.notifyCancelled(t),e.push(n)},this),this.resetObservers(),e.length&&this._observableProps.onRemove(this.event,e)}},getObservers:function(t){return t=h("getObservers",arguments).listFrom(this._observableProps.eventsMonitored,!0),s(this._observableProps,t)},triggerEvent:function(t){var e=h("triggerEvent",arguments),n=e.listFromWarn(this._observableProps.eventsMonitored,!0),r=e.restAsList();n&&u.each(n,function(e){if(this.isOneTimeEvent(t)){if(u.isArray(this._observableProps.oneTimeResults,t))return void c.warn("One time event was triggered twice, should by definition be triggered once",t);this._observableProps.oneTimeResults[t]=r}var n=this.getObservers(e),i=0;u.each(n,function(t){t.notify.apply(t,r.slice(0)),i++}),this._observableProps.onEvent.apply(null,[e,i].concat(r.slice(0)))},this)},resetObservers:function(){u.each(this._observableProps.eventsMonitored,function(t){this._observableProps.observers[t]=[]},this)},isOneTimeEvent:function(t){return u.contains(this._observableProps.oneTimeEvents,t)},observeOnce:function(t,e,n,r){var i,s=h("observeOnce",arguments,2,4);return t=s.nextFromWarn(this._observableProps.eventsMonitored),t&&(e=s.nextReq("function"),n=s.next("function"),r=s.next("object"),i=new f(this,t,e,r,n,!0),this._observableProps.observers[t].push(i),this._observableProps.onAdd(t,i),this.isOneTimeEvent(t)&&o(t,this._observableProps,i)),i}},e.exports=r},{"./Observer.js":11,"./args.js":12,"./logger.js":13,"./util.js":15}],11:[function(t,e,n){"use strict";function r(t,e,n,r,i,s){if("function"!=typeof n)throw new Error("Must provide a valid notifyFn");this.observable=t,this.fn=n,this.event=e,this.cancelFn=i||function(){},this.context=r,this.oneTimeEvent=!!s}var i=t("./util.js");r.prototype={notify:function(){var t=i.toArray(arguments);this.fn.apply(this.context,t),this.oneTimeEvent&&this.observable.stopObserving(this.event,this.fn,this.context)},matches:function(t,e,n){return i.isArray(t)?i.contains(t,function(t){return this.matches(t,e,n)},this):!(t&&t!==this.event||e&&e!==this&&e!==this.fn||n&&n!==this.context)},notifyCancelled:function(t){this.cancelFn.call(this.context,t||null)}},e.exports=r},{"./util.js":15}],12:[function(t,e,n){"use strict";function r(t,e,n,i){if("string"!=typeof t||!u.isObject(e))throw new Error("Args requires at least 2 args: fnName, arguments[, minArgs, maxArgs]");if(!(this instanceof r))return new r(t,e,n,i);this.fnName=t,this.argList=u.toArray(e),this.origArgs=u.toArray(e);var s=this.length=this.argList.length;if(this.pos=-1,u.isUndefined(n)&&(n=0),u.isUndefined(i)&&(i=this.argList.length),n>s||s>i){var o=i>n?u.printf("%d to %d",n,i):n;throw Error(u.printf("%s must be called with %s arguments, but received %d",t,o,s))}}function i(t,e){return e===!0?!0:(u.isArray(e)||(e=[e]),u.contains(e,function(e){switch(e){case"array":return u.isArray(t);case"string":return"string"==typeof t;case"number":return isFinite(parseInt(t,10));case"int":case"integer":return isFinite(parseFloat(t));case"object":return u.isObject(t);case"function":return"function"==typeof t;case"bool":case"boolean":return"boolean"==typeof t;case"boolean-like":return!u.isObject(t);default:throw new Error("Args received an invalid data type: "+e)}}))}function s(t,e,n,r){if(r=u.printf("%s: invalid argument at pos %d, %s (received %s)",e,n,r),t===!0)throw new Error(r);if(!u.has(h,t))throw new Error("The `required` value passed to Args methods must either be true or a method name from logger");h[t](r)}function o(t,e,n){h.warn("%s: invalid choice %s, must be one of [%s]",t,e,n)}function a(t,e){if(e===!0)return t;var n=u.isArray(e)?e[0]:e;switch(n){case"array":return u.isArray(t)?t:[t];case"string":return t+"";case"number":return parseFloat(t);case"int":case"integer":return parseInt(t,10);case"bool":case"boolean":case"boolean-like":return!!t;case"function":case"object":return t;default:throw new Error("Args received an invalid data type: "+n)}}var u=t("./util.js"),h=t("./logger.js");r.prototype={orig:function(){return this.origArgs.slice(0)},restAsList:function(t,e){var n=this.argList.slice(0);if(t||e)for(var r=0,i=n.length;i>r;r++)this._arg(e||!0,null,t>r);return n},skip:function(){return this.argList.length&&(this.pos++,this.argList.shift()),this},next:function(t,e){return this._arg(t,e,!1)},nextWarn:function(t,e){return this._arg(t,e,"warn")},nextReq:function(t){return this._arg(t,null,!0)},nextFrom:function(t,e){return this._from(t,e,!1)},nextFromWarn:function(t,e){return this._from(t,e,"warn")},nextFromReq:function(t){return this._from(t,null,!0)},listFrom:function(t,e){return this._list(t,e,!1)},listFromWarn:function(t,e){return this._list(t,e,"warn")},listFromReq:function(t){return this._list(t,null,!0)},_arg:function(t,e,n){return this.pos++,(u.isUndefined(t)||null===t)&&(t=!0),this.argList.length&&i(this.argList[0],t)?a(this.argList.shift(),t):(n&&s(n,this.fnName,this.pos,u.printf("must be of type %s",t)),e)},_from:function(t,e,n){return this.pos++,this.argList.length&&u.contains(t,this.argList[0])?this.argList.shift():(n&&s(n,this.fnName,this.pos,u.printf("must be one of %s",t)),e)},_list:function(t,e,n){this.pos++;var r=[],i=this.argList[0];return!this.argList.length||u.isEmpty(i)||!u.isArray(i)&&u.isObject(i)||(this.argList.shift(),u.isArray(i)?r=u.map(i,function(e){return u.contains(t,e)?e:void o(this.fnName,e,t)},this):u.contains(t,i)?r=[i]:o(this.fnName,i,t)),u.isEmpty(r)?(n&&s(n,this.fnName,this.pos,u.printf("choices must be in [%s]",t)),e===!0?t:e):r}},e.exports=r},{"./logger.js":13,"./util.js":15}],13:[function(t,e,n){"use strict";function r(t){return t.charAt(0).toUpperCase()+t.substr(1)}function i(){var t;return"undefined"!=typeof window&&window.location&&window.location.search&&(t=window.location.search.match("\bdebugLevel=([0-9]+)\b")),t?parseInt(t[1],10):u}function s(){return!0}function o(t,e){return e.length?t instanceof RegExp?!t.test(e[0]+""):!(e[0]+"").match(t):!0}function a(t){switch(t){case!1:return 0;case"off":return 0;case"none":return 0;case"error":return 1;case"warn":return 2;case"warning":return 2;case"info":return 3;case"log":return 4;case"debug":return 5;case!0:return u;case"on":return u;case"all":return u;default:return u}}var u=2,h=!1,c={error:s,warn:s,info:s,log:s,debug:s,time:s,timeEnd:s,group:s,groupEnd:s},f=t("./util.js"),l=function(){l.log.apply(null,f.toArray(arguments))};l.warn=s,l.error=s,l.info=s,l.log=s,l.debug=s,l.isErrorEnabled=s,l.isWarnEnabled=s,l.isInfoEnabled=s,l.isLogEnabled=s,l.isDebugEnabled=s,l.logLevel=function(t,e){if("number"!=typeof t&&(t=a(t)),h===t)return function(){};f.each(["error","warn","info","log","debug"],function(n,i){var a="undefined"!=typeof console&&t>=i+1;if(a){var u=f.bind(console["debug"===n?"log":n],console);l[n]=function(){var t=f.toArray(arguments);if(t.length>1&&"string"==typeof t[0]){var n=t[0].match(/(%s|%d|%j)/g);if(n){var r=[f.printf.apply(f,t)];t=t.length>n.length+1?r.concat(t.slice(n.length+1)):r}}e&&o(e,t)||u.apply("undefined"==typeof console?c:console,t)}}else l[n]=s;l["is"+r(n)+"Enabled"]=function(){return a}});var n=function(t){return function(){l.logLevel(t)}}(h);return h=t,n},l.logLevel(i()),e.exports=l},{"./util.js":15}],14:[function(t,e,n){"use strict";function r(t){this.needs=0,this.met=0,this.queued=[],this.errors=[],this.criteria=[],this.processing=!1,i.each(t,this.addCriteria,this)}var i=t("./util.js");r.prototype={addCriteria:function(t,e){if(this.processing)throw new Error("Cannot call addCriteria() after invoking done(), fail(), or handler() methods");return this.criteria.push(e?[t,e]:t),this},getHandler:function(){var t,e;return this.addCriteria(function(n){e!==i.undef?n(e):t=n}),function(n){t?t(n):e=n}},ready:function(){return this.needs===this.met},done:function(t,e){return t&&this._runOrStore(function(){this.hasErrors()||t.call(e)}),this},fail:function(t,e){return this._runOrStore(function(){this.hasErrors()&&t.apply(e,this.getErrors())}),this},handler:function(t,e){return this._runOrStore(function(){t.apply(e,this.getErrors())}),this},chain:function(t){return this.addCriteria(t.handler,t),this},when:function(t){this._runOrStore(function(){this.hasErrors()?t.reject.apply(t,this.getErrors()):t.resolve()})},addError:function(t){this.errors.push(t)},hasErrors:function(){return this.errors.length},getErrors:function(){return this.errors.slice(0)},_process:function(){this.processing=!0,this.needs=this.criteria.length,i.each(this.criteria,this._evaluateCriteria,this)},_evaluateCriteria:function(t){var e=null;i.isArray(t)&&(e=t[1],t=t[0]);try{t.call(e,i.bind(this._criteriaMet,this))}catch(n){this.addError(n)}},_criteriaMet:function(t){t&&this.addError(t),this.met++,this.ready()&&i.each(this.queued,this._run,this)},_runOrStore:function(t){this.processing||this._process(),this.ready()?this._run(t):this.queued.push(t)},_run:function(t){t.call(this)}},e.exports=function(t,e){var n=new r(t);return e&&n.done(e),n}},{"./util.js":15}],15:[function(t,e,n){(function(e){"use strict";function r(t,e){switch(e){case"%d":return parseInt(t,10);case"%j":return t=c.isObject(t)?JSON.stringify(t):t+"",t.length>500&&(t=t.substr(0,500)+".../*truncated*/...}"),t;case"%s":return t+"";default:return t}}function i(t){return c.isObject(t)&&t+""=="[object Arguments]"}function s(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}function o(t,e){var n,r;for(n=0,r=this.length;r>n;++n)n in this&&t.call(e,this[n],n,this)}function a(t){return"[object Array]"===Object.prototype.toString.call(t)}function u(t,e){if(null===this)throw new TypeError;var n,r,i=Object(this),s=i.length>>>0;if(0===s)return-1;if(n=0,arguments.length>1&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=s)return-1;for(r=n>=0?n:Math.max(s-Math.abs(n),0);s>r;r++)if(r in i&&i[r]===t)return r;return-1}var h,c=n,f=["value","child_added","child_removed","child_updated","child_changed"];c.undef=h,c.Firebase=e.Firebase||t("firebase"),c.isDefined=function(t){return t!==h},c.isUndefined=function(t){return t===h},c.isObject=function(t){return Object.prototype.isPrototypeOf(t)},c.isArray=function(t){return(Array.isArray||a).call(null,t)},c.isFunction=function(t,e){return"string"==typeof e?c.isObject(t)&&c.has(t,e)&&"function"==typeof t[e]:"function"==typeof t},c.toArray=function(t,e){var n=c.map(t,function(t,e){return t});return e>0?n.slice(e):n},c.extend=function(t,e){var n=c.toArray(arguments),r="boolean"==typeof n[0]&&n.shift(),i=n.shift();return c.each(n,function(t){c.isObject(t)&&c.each(t,function(t,e){i[e]=r&&c.isObject(i[e])?c.extend(!0,i[e],t):t})}),i},c.bind=function(t,e){var n=Array.prototype.slice.call(arguments,1);return(t.bind||s).apply(t,n)},c.isEmpty=function(t){return t===h||null===t||c.isArray(t)&&0===t.length||c.isObject(t)&&!c.contains(t,function(t){return!0})},c.keys=function(t){var e=[];return c.each(t,function(t,n){e.push(n)}),e},c.map=function(t,e,n){var r=[];return c.each(t,function(i,s){var o=e.call(n,i,s,t);o!==h&&r.push(o)}),r},c.mapObject=function(t,e,n){var r={};return c.each(t,function(i,s){var o=e.call(n,i,s,t);o!==h&&(r[s]=o)}),r},c.find=function(t,e,n){if(c.isArray(t)){for(var r=0,i=t.length;i>r;r++)if(e.call(n,t[r],r,t)===!0)return t[r]}else if(c.isObject(t)){var s;for(s in t)if(t.hasOwnProperty(s)&&e.call(n,t[s],s,t)===!0)return t[s]}return h},c.filter=function(t,e,n){var r=c.isArray(t),i=r?[]:{};return c.each(t,function(s,o){e.call(n,s,o,t)&&(r?i.push(s):i[o]=s)}),i},c.reduce=function(t,e,n){return c.each(t,function(r,i){e=n(e,r,i,t)}),e},c.has=function(t,e){return c.isObject(t)&&t[e]!==h},c.val=function(t,e){return c.has(t,e)?t[e]:h},c.contains=function(t,e,n){if("function"!=typeof e){if(c.isArray(t))return c.indexOf(t,e)>-1;e=function(t){return function(e){return e===t}}(e)}return c.find(t,e,n)!==h},c.each=function(t,e,n){if(c.isArray(t)||i(t))(t.forEach||o).call(t,e,n);else if(c.isObject(t)){var r;for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}},c.indexOf=function(t,e){return(t.indexOf||u).call(t,e)},c.remove=function(t,e){var n=!1;if(c.isArray(t)){var r=c.indexOf(t,e);r>-1&&(t.splice(r,1),n=!0)}else if(c.isObject(t)){var i;for(i in t)if(t.hasOwnProperty(i)&&e===t[i]){n=!0,delete t[i];break}}return n},c.defer=function(t,e){var n=c.toArray(arguments);setTimeout(c.bind.apply(null,n),0)},c.call=function(t,e){var n=c.toArray(arguments,2),r=[];return c.each(t,function(t){return"function"!=typeof t||e?void(c.isObject(t)&&"function"==typeof t[e]&&r.push(t[e].apply(t,n))):r.push(t.apply(null,n))}),r},c.isEqual=function(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(c.isObject(t)&&c.isObject(e)){var r=c.isArray(t),i=c.isArray(e);if(r||i)return r&&i&&t.length===e.length&&!c.contains(t,function(t,n){return!c.isEqual(t,e[n])});var s=n?c.keys(t):c.keys(t).sort(),o=n?c.keys(e):c.keys(e).sort();return c.isEqual(s,o)&&!c.contains(t,function(t,n){return!c.isEqual(t,e[n]);

})}return!1},c.bindAll=function(t,e){return c.each(e,function(n,r){"function"==typeof n&&(e[r]=c.bind(n,t))}),e},c.printf=function(){var t=c.toArray(arguments),e=t.shift(),n=e.match(/(%s|%d|%j)/g);return n&&t.length&&c.find(n,function(n){return e=e.replace(n,r(t.shift(),n)),0===t.length}),e},c.mergeToString=function(t){return 0===t.length?null:1===t.length?t[0]:"["+t.join("][")+"]"},c.construct=function(t,e){function n(){return t.apply(this,e)}return n.prototype=t.prototype,new n},c.noop=function(){};var l=[];c.isFirebaseRef=function(t){if(!c.isObject(t))return!1;var e=Object.getPrototypeOf(t);return e&&e.constructor===c.Firebase.prototype.constructor?!0:"function"==typeof t.ref&&"function"==typeof t.ref().transaction?!0:c.isFirebaseRefWrapper(t)},c.isFirebaseRefWrapper=function(t){return c.contains(l,function(e){return t instanceof e})},c.isQueryRef=function(t){return c.isFirebaseRef(t)&&"function"!=typeof t.transaction},c.registerFirebaseWrapper=function(t){l.push(t)},c._mockFirebaseRef=function(t){c.Firebase=t},c.escapeEmail=function(t){return(t||"").replace(".",",")},c.assertValidEvent=function(t){if(!c.contains(f,t))throw new Error("Event must be one of "+f+", but received "+t)},c.inherits=function(t,e){var n=[t.prototype].concat(c.toArray(arguments).slice(2));return t.prototype=new e,t.prototype.constructor=e,c.each(n,function(e){c.each(e,function(e,n){t.prototype[n]=e})}),t.prototype._super=function(){e.apply(this,arguments)},t},c.deepCopy=function(t){if(!c.isObject(t))return t;var e=c.isArray(t)?[]:{};return c.each(t,function(t,n){e[n]=c.deepCopy(t)}),e},c.pick=function(t,e){if(!c.isObject(t))return{};var n=c.isArray(t)?[]:{};return c.each(e,function(e){n[e]=t[e]}),n},c.eachByPath=function(t,e,n,r){var i={};c.each(e,function(e,n){var r=t.pathFor(n),s=t.getField(n),o=s?s.id:n;c.has(i,r.name())||(i[r.name()]={path:r,data:{}}),i[r.name()].data[o]=e}),c.each(i,function(t){n.call(r,t.path,t.data)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{firebase:"firebase"}],"firebase-util":[function(t,e,n){"use strict";var r=t("./common/index.js");r.extend(n,t("./common/exports.js"),t("./Paginate/exports.js")),"undefined"!=typeof window&&(window.hasOwnProperty("Firebase")?window.Firebase.util=r:console.warn("Firebase not found on the global window instance. Cannot add Firebase.util namespace."))},{"./Paginate/exports.js":2,"./common/exports.js":8,"./common/index.js":9}]},{},[1]);